generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int            @id @default(autoincrement())
  name          String
  email         String         @unique
  password      String
  role          String
  interests     String?
  memberships   Membership[]
  registrations Registration[]
}

model Club {
  id           Int          @id @default(autoincrement())
  name         String
  description  String
  category     String
  contactEmail String?
  events       Event[]
  memberships  Membership[]
}

model Event {
  id            Int            @id @default(autoincrement())
  title         String
  date          DateTime
  location      String
  description   String
  imageUrl      String?
  clubId        Int
  club          Club           @relation(fields: [clubId], references: [id])
  registrations Registration[]
}

model Registration {
  id      Int    @id @default(autoincrement())
  userId  Int
  eventId Int
  status  String @default("registered")
  event   Event  @relation(fields: [eventId], references: [id])
  user    User   @relation(fields: [userId], references: [id])
}

model Membership {
  id     Int    @id @default(autoincrement())
  userId Int
  clubId Int
  role   String @default("member")
  club   Club   @relation(fields: [clubId], references: [id])
  user   User   @relation(fields: [userId], references: [id])
}

